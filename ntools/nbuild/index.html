<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="naz-hage" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Nbuild (nb.exe) - Ntools - Work in Progress</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Nbuild (nb.exe)";
        var mkdocs_page_input_path = "ntools/nbuild.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Ntools - Work in Progress
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/">Practice</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../setup/">Setup your project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../buildtypes/">Build Types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../versioning/">Versioning</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">List of Tools</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Nbuild (nb.exe)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dry-run-contract">Dry-run contract</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#2-uninstall-applications">2. Uninstall Applications</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-list-installed-applications">3. List Installed Applications</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-download-applications">4. Download Applications</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#5-display-path-segments">5. Display Path Segments</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#6-display-git-information">6. Display Git Information</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#7-set-a-specific-git-tag">7. Set a Specific Git Tag</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#8-automatically-set-the-next-git-tag">8. Automatically Set the Next Git Tag</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#9-push-the-next-git-tag-to-remote">9. Push the Next Git Tag to Remote</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#10-display-the-current-git-branch">10. Display the Current Git Branch</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#11-clone-a-git-repository">11. Clone a Git Repository</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#12-delete-a-specific-tag">12. Delete a Specific Tag</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#13-creating-a-release">13. Creating a Release</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#14-creating-a-pre-release">14. Creating a Pre-Release</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#15-downloading-an-asset">15. Downloading an Asset</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#16-creating-a-release-with-full-github-url">16. Creating a Release with Full GitHub URL</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#17-downloading-an-asset-with-full-github-url">17. Downloading an Asset with Full GitHub URL</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#18-list-latest-releases">18. List Latest Releases</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#19-list-build-targets">19. List Build Targets</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#20-run-any-listed-target">20. Run Any Listed Target</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../lf/">lf (lf.exe)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nbackup/">Nbackup (nbackup.exe)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../github-release/">Github Release</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Custom Build Tasks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../nbuildtasks/">Nbuild Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../version-automation-guide/">Version Automation Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ntools/">Development Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >ntools-scripts module</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../ntools-scripts-module/">Module</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ntools-scripts-module-api/">API</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Build System Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../code-coverage/">Code Coverage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nbuild-targets/">MSBuild Targets</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">atools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../atools/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >List of tools</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../atools/sdo/">SDO (Simple DevOps Operations)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../atools/sdo-installation/">SDO Installation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../atools/install-ntools/">Install NTools</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../SDO_ARCHITECTURE/">SDO Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../atools/azdo_payloads/">AzDO payloads</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Ntools - Work in Progress</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">List of Tools</li>
      <li class="breadcrumb-item active">Nbuild (nb.exe)</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/naz-hage/ntools/edit/main/docs/ntools/nbuild.md">Edit on ntools</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#nbuildtargets">nbuild.targets</a></li>
<li><a href="#commontargets">common.targets</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
<hr />
<h1 id="nbuild-nbexe">Nbuild (<code>nb.exe</code>)</h1>
<p><code>Nbuild</code> (<code>nb.exe</code>) is a powerful command-line utility for .NET developers. It wraps <a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild">MSBuild</a> to simplify building solutions, running custom targets, and managing your development toolchain.</p>
<p><strong>Key Features:</strong>
- Build and run custom targets with a single command
- Install, uninstall, and list development tools from a manifest file
- Download tools and assets for your environment
- Integrate with Git for tagging, branching, and release automation
- Automate GitHub releases and asset downloads
- <strong>Global options</strong> (<code>--dry-run</code>, <code>--verbose</code>) available for all commands</p>
<blockquote>
<p><strong>Note:</strong> <code>nb.exe</code> expects the <a href="#nbuildtargets">nbuild.targets</a> file to be present in your solution folder for build-related commands.</p>
</blockquote>
<h2 id="usage">Usage</h2>
<pre><code class="language-cmd">Description:
  Nbuild - Build and DevOps Utility

Usage:
  nb [command] [options] [[--] &lt;additional arguments&gt;...]

Options:
  --dry-run       Perform a dry run: show actions but do not perform side effects
  --verbose       Verbose output
  -?, -h, --help  Show help and usage information
  --version       Show version information

Commands:
  install                Install tools and applications specified in the manifest file.
  uninstall              Uninstall tools and applications specified in the manifest file.
  list                   Display a formatted table of all tools and their versions.
                         Use this command to audit, compare, or document the state of your development environment.
  download               Download tools and applications specified in the manifest file.
  path                   Display each segment of the effective PATH environment variable on a separate line, with duplicates removed. Shows the complete PATH that processes actually use (Machine + User PATH combined).
  git_info               Displays the current git information for the local repository, including branch, and latest tag.
  git_settag             Sets a git tag in the local repository.
  git_autotag            Automatically sets the next git tag based on build type.
  git_push_autotag       Sets the next git tag based on build type and pushes to remote.
  git_branch             Displays the current git branch in the local repository.
  git_clone              Clones a Git repository to a specified path.
  git_deletetag          Deletes a git tag from the local repository.
  release_create         Creates a GitHub release.
  pre_release_create     Creates a GitHub pre-release.
  release_download       Downloads a specific asset from a GitHub release.
  list_release           Lists the latest releases for the specified repository.
  targets                Displays all available build targets for the current solution or project.

Additional Arguments:
  Arguments passed to the application that is being run.
</code></pre>
<h2 id="dry-run-contract">Dry-run contract</h2>
<pre><code>                       --repo   Git repository (formats: repoName, userName/repoName, or full GitHub URL)
                       --tag    Tag to use for the release (e.g., 1.24.33)
                       --branch Branch name to release from (e.g., main)
                       --file   Asset file name (full path required)
</code></pre>
<p>Examples:
                           nb release_create --repo user/repo --tag 1.24.33 --branch main --file C:\path\to\asset.zip
                           nb release_create --repo https://github.com/user/repo --tag 1.24.33 --branch main --file ./asset.zip
  pre_release_create     Creates a GitHub pre-release.</p>
<pre><code>                     Required options:
                       --repo   Git repository (formats: repoName, userName/repoName, or full GitHub URL)
                       --tag    Tag to use for the pre-release (e.g., 1.24.33)
                       --branch Branch name to release from (e.g., main)
                       --file   Asset file name (full path required)
</code></pre>
<p>Example:
                           nb pre_release_create --repo user/repo --tag 1.24.33 --branch main --file C:\path\to\asset.zip
  release_download       Downloads a specific asset from a GitHub release.</p>
<pre><code>                     Required options:
                       --repo   Git repository (formats: repoName, userName/repoName, or full GitHub URL)
                       --tag    Tag to use for the release (e.g., 1.24.33)
                       --path   Path to download asset to (default: current directory)
</code></pre>
<p>Example:
                           nb release_download --repo user/repo --tag 1.24.33 --path C:\downloads
  list_release           Lists the latest 3 releases for the specified repository, and the latest pre-release if newer.</p>
<pre><code>                     Required option:
                       --repo   Git repository (formats: repoName, userName/repoName, or full GitHub URL)
</code></pre>
<p>Example:
                           nb list_release --repo user/repo
  targets                Displays all available build targets for the current solution or project.</p>
<p>You can run any listed target directly using nb.exe.
                         Example: If 'core' is listed, you can run:
                           nb core</p>
<p>Additional Arguments:
  Arguments passed to the application that is being run.</p>
<pre><code>
## Dry-run contract

When `--dry-run` is supplied to `nb.exe` the CLI will not perform any state-changing
operations. The intent of `--dry-run` is to provide a safe, predictable preview of
what the CLI would do without modifying remote services, local files, system
configuration, or registry state.

Key points:
- `--dry-run` must never upload files, create or modify GitHub releases, write to
  Program Files, change PATH, edit the registry, or delete files.
- For destructive commands (for example `release_create`, `pre_release_create`,
  `install`, `uninstall`, `upload`) the command will short-circuit and print a
  concise action summary prefixed with `DRY-RUN:` (for example: `DRY-RUN: would
  upload asset X to release Y`).
- For read-only commands (for example `list_release`) the default Behavior is to
  avoid network access in dry-run and print a short simulated message. If a
  project requires read-only network access during dry-run, it should be made
  explicit (for example `--dry-run=fetch`) in a follow-up PBI.
&gt; **Tip:** If the `--json` option is not specified, the default manifest file `C:\Program Files\NBuild\ntools.json` is used.

---

## nbuild.targets
See [`nbuild.targets`](https://github.com/naz-hage/ntools/blob/main/Nbuild/resources/nbuild.targets) for more information and checkout other targets in [`Nbuild/resources`](https://github.com/naz-hage/ntools/blob/main/Nbuild/resources).

### common.targets
- The `common.targets` file includes all the defaults targets needed to build, test and deploy a solution.  The `common.targets` file is located in the `$(ProgramFiles)\Nbuild` folder.  The `nbuild.targets` file in the solution folder imports the `common.targets` file

Below is a list of common targets defined in the `common.targets` file:

| **Target Name** | **Description** |
| --- | --- |
| PROPERTIES          | Common properties that will be used by all targets |
| CLEAN               | Clean up the project and artifacts folder |
| INSTALL_DEP         | Install dependencies |
| TELEMETRY_OPT_OUT   | Opt out of the DOTNET_CLI_TELEMETRY_OPTOUT - move to common |
| STAGE             | Create a stage package for testing |
| PROD          | Create a production package for release |
| STAGE_DEPLOY      | Create a stage package and deploy for testing |
| PROD_DEPLOY   | Create a production package and deploy for release |
| SOLUTION            | Build the solution Release configuration  using dotnet build |
| SOLUTION_MSBUILD    | Build the solution Release configuration  using MSBuild |
| PACKAGE             | Create a package for the solution default is a zip file of all artifacts |
| COPY_ARTIFACTS      | Save the artifacts to the artifacts folder |
| DEPLOY              | Deploy the package. default is to extract artifacts into DeploymentProperty folder |
| TEST                | Run all tests using dotnet test in Release mode |
| TEST_DEBUG          | Run all tests using dotnet test in Debug mode |
| IS_ADMIN            | Check if current process is running in admin mode AdminCheckExitCode property is set |
| SingleProject       | Example how to build a single project |
| HandleError         | Error handling placeholder |

---

## Examples

Below are practical examples for using `nb.exe`. These examples assume you are running in a PowerShell terminal.

### 1. Install Applications
```cmd
nb.exe install --json &quot;C:\Program Files\tools.json&quot;
</code></pre>
<p>Installs applications specified in the manifest file. (Requires admin privileges.)</p>
<h3 id="2-uninstall-applications">2. Uninstall Applications</h3>
<pre><code class="language-cmd">nb.exe uninstall --json &quot;C:\Program Files\example-tool.json&quot;
</code></pre>
<p>Uninstalls applications as specified in the manifest file. (Requires admin privileges.)</p>
<h3 id="3-list-installed-applications">3. List Installed Applications</h3>
<pre><code class="language-cmd">nb.exe list
nb.exe list --json &quot;C:\Program Files\NBuild\ntools.json&quot;
</code></pre>
<p>Lists all applications specified in the provided JSON file. If no <code>--json</code> option is specified, the default file is used.</p>
<h3 id="4-download-applications">4. Download Applications</h3>
<pre><code class="language-cmd">nb.exe download --json &quot;C:\Program Files\NBuild\ntools.json&quot;
</code></pre>
<p>Downloads tools and applications specified in the manifest file.</p>
<h3 id="5-display-path-segments">5. Display Path Segments</h3>
<pre><code class="language-cmd">nb.exe path
nb.exe path
</code></pre>
<p>Displays each segment of the effective PATH environment variable on a separate line, with duplicates removed. Shows the complete PATH that processes actually use (Machine + User PATH combined). Use <code>--verbose</code> for additional output.</p>
<h3 id="6-display-git-information">6. Display Git Information</h3>
<pre><code class="language-cmd">nb.exe git_info
</code></pre>
<p>Displays the current git branch and latest tag information for the local repository.</p>
<h3 id="7-set-a-specific-git-tag">7. Set a Specific Git Tag</h3>
<pre><code class="language-cmd">nb.exe git_settag --tag 1.24.33
</code></pre>
<p>Sets the specified git tag in the local repository.</p>
<h3 id="8-automatically-set-the-next-git-tag">8. Automatically Set the Next Git Tag</h3>
<pre><code class="language-cmd">nb.exe git_autotag --buildtype STAGE
</code></pre>
<p>Automatically sets the next git tag based on the specified build type (<code>STAGE</code> or <code>PROD</code>).</p>
<h3 id="9-push-the-next-git-tag-to-remote">9. Push the Next Git Tag to Remote</h3>
<pre><code class="language-cmd">nb.exe git_push_autotag --buildtype PROD
</code></pre>
<p>Sets the next git tag based on build type and pushes it to the remote repository.</p>
<h3 id="10-display-the-current-git-branch">10. Display the Current Git Branch</h3>
<pre><code class="language-cmd">nb.exe git_branch
</code></pre>
<p>Displays the current git branch in the local repository.</p>
<h3 id="11-clone-a-git-repository">11. Clone a Git Repository</h3>
<pre><code class="language-cmd">nb.exe git_clone --url https://github.com/example/repo --path C:\Projects
</code></pre>
<p>Clones the specified git repository into the specified path. Use <code>--verbose</code> for detailed output.</p>
<h3 id="12-delete-a-specific-tag">12. Delete a Specific Tag</h3>
<pre><code class="language-cmd">nb.exe git_deletetag --tag 1.24.33
</code></pre>
<p>Deletes the specified git tag from the local repository.</p>
<h3 id="13-creating-a-release">13. Creating a Release</h3>
<pre><code class="language-cmd">nb.exe release_create --repo userName/my-repo --tag 1.24.33 --branch main --file C:\Releases\1.0.0.zip
</code></pre>
<p>Creates a GitHub release for the specified repository, tag, branch, and asset file.</p>
<h3 id="14-creating-a-pre-release">14. Creating a Pre-Release</h3>
<pre><code class="language-cmd">nb.exe pre_release_create --repo userName/my-repo --tag 1.24.33 --branch main --file C:\Releases\1.0.0.zip
</code></pre>
<p>Creates a GitHub pre-release for the specified repository, tag, branch, and asset file.</p>
<h3 id="15-downloading-an-asset">15. Downloading an Asset</h3>
<pre><code class="language-cmd">nb.exe release_download --repo userName/my-repo --tag 1.24.33 --path C:\Downloads
</code></pre>
<p>Downloads an asset from the specified release to the given path.</p>
<h3 id="16-creating-a-release-with-full-github-url">16. Creating a Release with Full GitHub URL</h3>
<pre><code class="language-cmd">nb.exe release_create --repo https://github.com/userName/my-repo --tag 1.24.33 --branch main --file C:\Releases\1.0.0.zip
</code></pre>
<p>Creates a GitHub release using the full GitHub repository URL.</p>
<h3 id="17-downloading-an-asset-with-full-github-url">17. Downloading an Asset with Full GitHub URL</h3>
<pre><code class="language-cmd">nb.exe release_download --repo https://github.com/userName/my-repo --tag 1.24.33 --path C:\Downloads
</code></pre>
<p>Downloads an asset using the full GitHub repository URL.</p>
<h3 id="18-list-latest-releases">18. List Latest Releases</h3>
<pre><code class="language-cmd">nb.exe list_release --repo https://github.com/userName/my-repo
</code></pre>
<p>Lists the latest 3 releases and the newest pre-release (if newer than the latest release). Use <code>--verbose</code> for detailed output.</p>
<h3 id="19-list-build-targets">19. List Build Targets</h3>
<pre><code class="language-cmd">nb.exe targets
</code></pre>
<p>Lists all available build targets for the current solution or project.</p>
<h3 id="20-run-any-listed-target">20. Run Any Listed Target</h3>
<pre><code class="language-cmd">nb.exe core
</code></pre>
<p>Runs the target named <code>core</code> if it is listed by <code>nb targets</code>.</p>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../versioning/" class="btn btn-neutral float-left" title="Versioning"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../lf/" class="btn btn-neutral float-right" title="lf (lf.exe)">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/naz-hage/ntools" class="fa fa-code-fork" style="color: #fcfcfc"> ntools</a>
        </span>
    
    
      <span><a href="../../versioning/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../lf/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
