<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="naz-hage" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Nbuild (nb.exe) - Ntools - Work in Progress</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Nbuild (nb.exe)";
        var mkdocs_page_input_path = "ntools/nbuild.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Ntools - Work in Progress
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/">Practice</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../setup/">Setup your project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../buildtypes/">Build Types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../versioning/">Versioning</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">List of Tools</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Nbuild (nb.exe)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#nbuildtargets">nbuild.targets</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#commontargets">common.targets</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#1-list-installed-applications">1. List Installed Applications</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-install-applications">2. Install Applications</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-display-git-information">3. Display Git Information</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-run-a-build-target">4. Run a Build Target</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#5-list-nbuild-targets">5. List nbuild targets</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#6-set-a-specific-git-tag">6. Set a Specific Git Tag</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#7-automatically-set-the-next-git-tag">7. Automatically Set the Next Git Tag</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#8-push-the-next-git-tag-to-remote">8. Push the Next Git Tag to Remote</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#9-display-the-current-git-branch">9. Display the Current Git Branch</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#10-clone-a-git-repository">10. Clone a Git Repository</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#11-delete-a-specific-tag">11. Delete a Specific Tag</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#12-creating-a-release">12. Creating a Release</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#13-creating-a-pre-release">13. Creating a Pre-Release</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#14-downloading-an-asset">14. Downloading an Asset</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#15-creating-a-release-with-full-github-url">15. Creating a Release with Full GitHub URL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#16-downloading-an-asset-with-full-github-url">16. Downloading an Asset with Full GitHub URL</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nbackup/">Nbackup (nbackup.exe)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../github-release/">Github Release</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Custom Build Tasks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../nbuildtasks/">Nbuild Tasks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Update</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ntools/">Development Tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Revisions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Ntools - Work in Progress</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">List of Tools</li>
      <li class="breadcrumb-item active">Nbuild (nb.exe)</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/naz-hage/ntools/edit/main/docs/ntools/nbuild.md">Edit on ntools</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#nbuildtargets">nbuild.targets</a></li>
<li><a href="#commontargets">common.targets</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
<hr />
<h1 id="nbuild">Nbuild</h1>
<ul>
<li><code>Nbuild</code> (<code>nb.exe</code>) is a wrapper for <a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild">MSBuild</a> that simplifies building solutions and provides a way to define and run custom targets.</li>
<li><code>Nb.exe</code> is also a command line tool that installs the development tools and run times required to build and test any solution.<ul>
<li>To build a target type <code>Nb.exe [Target Name]</code></li>
<li>The list of targets is generated by running the <code>Nb.exe targets</code> command.</li>
</ul>
</li>
<li><code>Nb.exe</code> expects the <a href="#nbuildtargets">nbuild.targets</a> file to be present in the solution folder.</li>
</ul>
<p>Below is a full list of options that can be used with <code>Nb.exe</code>:</p>
<h3 id="usage">Usage</h3>
<pre><code class="language-cmd"> Nb.exe command [-json value] [-v value] [-url value] [-tag value] [-path value] [-buildtype value] [-repo value] [-branch value] [-file value]
  - command   : Specifies the command to execute.
         list                    -&gt; Lists apps specified in the -json option.
         install                 -&gt; Downloads and installs apps specified in the -json option (requires admin privileges).
         uninstall               -&gt; Uninstalls apps specified in the -json option (requires admin privileges).
         download                -&gt; Downloads tools or apps listed in the -json option (requires admin privileges).
         targets                 -&gt; Lists available build targets and saves them in the targets.md file.
         path                    -&gt; Displays the environment PATH variable for the local machine.
         git_info                -&gt; Displays the current git information for the local repository.
         git_settag              -&gt; Sets the specified tag using the -tag option.
         git_autotag             -&gt; Sets the next tag based on the build type: STAGE or PROD.
         git_push_autotag        -&gt; Sets the next tag based on the build type and pushes to the remote repository.
         git_branch              -&gt; Displays the current git branch in the local repository.
         git_clone               -&gt; Clones the specified Git repository using the -url option.
         git_deletetag           -&gt; Deletes the specified tag using the -tag option.
         release_create          -&gt; Creates a GitHub release. Requires -repo, -tag, -branch, and -file options.
         pre_release_create      -&gt; Creates a GitHub pre-release. Requires -repo, -tag, -branch, and -file options.
         release_download        -&gt; Downloads a specific asset from a GitHub release. Requires -repo, -tag, and -path (optional, defaults to current directory).
         list_release            -&gt; Lists all releases for the specified repository. Requires -repo.
         ----
          The nbuild.exe can also execute targets defined in an nbuild.targets file if one       exists in the current folder.
         To execute a target defined in nbuild.targets, simply use its name as the command.
         For example, if nbuild.targets defines a target named 'build', you can run it    with: `nb.exe build`
 (one of list,install,uninstall,download,targets,path,git_info,git_settag,git_autotag,git_push_autotag,git_branch,git_clone,git_deletetag,release_create,pre_release_create,release_download,list_release, required)
  - json      : Specifies the JSON file that holds the list of apps. Only valid for the install, download, and list commands.
         - By default, the -json option points to the ntools deployment folder: $(ProgramFiles)\build\ntools.json.
         Sample JSON file: https://github.com/naz-hage/ntools/blob/main/dev-setup/ntools.json
          (string, default=$(ProgramFiles)\nbuild\ntools.json)
  - v         : Optional parameter which sets the console output verbose level
         ----
         - if no command line options are specified with the -v option , i.e.: 'Nb.exe stage -v true`
           `Nb` will run an MSbuild target `stage` defined in a `nbuild.targets` file which present in the solution folder.
           Run `Nb.exe Targets` to list the available targets.
         -v Possible Values: (true or false, default=False)
  - url       : Specifies the Git repository URL. (string, default=)
  - tag       : Specifies the tag used for git_settag and git_deletetag commands. (string, default=)
  - path      : Specifies the path used for git_clone, pre_release_create and release_create commands. If not specified, the current directory will be used.
         for pre_release_create and release_create commands, it must be an absolute path (string, default=)
  - buildtype : Specifies the build type used for git_autotag and git_push_autotag commands. Possible values: STAGE, PROD. (string, default=)
  - repo      : Specifies the Git repository in the format any of the following formats:
         repoName  (UserName is declared the `OWNER` environment variable)
         userName/repoName
         https://github.com/userName/repoName (Full URL to the repository on GitHub). This is applicable to release_create, pre_release_create and release_download commands. (string, default=)
  - branch    : Specifies the branch name. Applicable for release_create, pre_release_create commands (string, default=main)
  - file      : Specifies the asset file name. Must include full path. Applicable for release_create, pre_release_create commands (string, default=)
</code></pre>
<p><strong>If the -json option is not specified, the default json file <code>$(ProgramFiles)\Nbuild\NTools.json</code> is used</strong>. </p>
<h3 id="nbuildtargets">nbuild.targets</h3>
<p>See <a href="../../setup/#nbuildtargets">nbuild.targets</a> for more information on how to create a <code>nbuild.targets</code> file.</p>
<h3 id="commontargets">common.targets</h3>
<ul>
<li>The <code>common.targets</code> file includes all the defaults targets needed to build, test and deploy a solution.  The <code>common.targets</code> file is located in the <code>$(ProgramFiles)\Nbuild</code> folder.  The <code>nbuild.targets</code> file in the solution folder imports the <code>common.targets</code> file</li>
</ul>
<p>Below is list of common targets that are defined in the <code>common.targets</code> file</p>
<table>
<thead>
<tr>
<th><strong>Target Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>PROPERTIES</td>
<td>Common properties that will be used by all targets</td>
</tr>
<tr>
<td>CLEAN</td>
<td>Clean up the project and artifacts folder</td>
</tr>
<tr>
<td>INSTALL_DEP</td>
<td>Install dependencies</td>
</tr>
<tr>
<td>TELEMETRY_OPT_OUT</td>
<td>Opt out of the DOTNET_CLI_TELEMETRY_OPTOUT - move to common</td>
</tr>
<tr>
<td>STAGE</td>
<td>Create a stage package for testing</td>
</tr>
<tr>
<td>PROD</td>
<td>Create a production package for release</td>
</tr>
<tr>
<td>STAGE_DEPLOY</td>
<td>Create a stage package and deploy for testing</td>
</tr>
<tr>
<td>PROD_DEPLOY</td>
<td>Create a production package and deploy for release</td>
</tr>
<tr>
<td>SOLUTION</td>
<td>Build the solution Release configuration  using dotnet build</td>
</tr>
<tr>
<td>SOLUTION_MSBUILD</td>
<td>Build the solution Release configuration  using MSBuild</td>
</tr>
<tr>
<td>PACKAGE</td>
<td>Create a package for the solution default is a zip file of all artifacts</td>
</tr>
<tr>
<td>COPY_ARTIFACTS</td>
<td>Save the artifacts to the artifacts folder</td>
</tr>
<tr>
<td>DEPLOY</td>
<td>Deploy the package. default is to extract artifacts into DeploymentProperty folder</td>
</tr>
<tr>
<td>TEST</td>
<td>Run all tests using dotnet test in Release mode</td>
</tr>
<tr>
<td>TEST_DEBUG</td>
<td>Run all tests using dotnet test in Debug mode</td>
</tr>
<tr>
<td>IS_ADMIN</td>
<td>Check if current process is running in admin mode AdminCheckExitCode property is set</td>
</tr>
<tr>
<td>SingleProject</td>
<td>Example how to build a single project</td>
</tr>
<tr>
<td>HandleError</td>
<td>Error handling placeholder</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>This section provides examples of how to use the <code>nb.exe</code> command line tool. The examples assume that you are running a powershell terminal.</p>
<h2 id="1-list-installed-applications">1. List Installed Applications</h2>
<pre><code class="language-cmd">nb.exe list -json $env:ProgramFiles\tools.json
</code></pre>
<p>Lists all applications specified in the provided JSON file.</p>
<h2 id="2-install-applications">2. Install Applications</h2>
<pre><code class="language-cmd">nb.exe install -json $env:ProgramFiles\tools.json
</code></pre>
<p>Downloads and installs applications specified in the JSON file (requires admin privileges). This checks if the application is already installed and if not it will install it.
If the application is already installed, it will skip the installation.</p>
<h2 id="3-display-git-information">3. Display Git Information</h2>
<pre><code class="language-cmd">nb.exe git_info
</code></pre>
<p>Displays the current Git branch and tag information for the local repository.</p>
<h2 id="4-run-a-build-target">4. Run a Build Target</h2>
<pre><code class="language-cmd">nb.exe stage -v true
</code></pre>
<p>Runs the <code>stage</code> target defined in the nbuild.targets file with verbose output enabled.</p>
<h2 id="5-list-nbuild-targets">5. List nbuild targets</h2>
<pre><code class="language-cmd">nb.exe targets
</code></pre>
<p>Lists all available build targets defined in the nbuild.targets file and saves them in the targets.md file.</p>
<h2 id="6-set-a-specific-git-tag">6. Set a Specific Git Tag</h2>
<pre><code class="language-cmd">nb.exe git_settag -tag 1.0.0
</code></pre>
<p>Sets the specified Git tag (<code>1.0.0</code>) in the local repository.</p>
<h2 id="7-automatically-set-the-next-git-tag">7. Automatically Set the Next Git Tag</h2>
<pre><code class="language-cmd">nb.exe git_autotag -buildtype stage
</code></pre>
<p>Automatically generates and sets the next Git tag based on the specified build type (<code>stage</code> or <code>prod</code>).</p>
<h2 id="8-push-the-next-git-tag-to-remote">8. Push the Next Git Tag to Remote</h2>
<pre><code class="language-cmd">nb.exe git_push_autotag -buildtype prod
</code></pre>
<p>Automatically generates the next Git tag based on the specified build type (<code>prod</code>) and pushes it to the remote repository.</p>
<h2 id="9-display-the-current-git-branch">9. Display the Current Git Branch</h2>
<pre><code class="language-cmd">nb.exe git_branch
</code></pre>
<p>Displays the current Git branch in the local repository.</p>
<h2 id="10-clone-a-git-repository">10. Clone a Git Repository</h2>
<pre><code class="language-cmd">nb.exe git_clone -url https://github.com/example/repo -path C:\Projects
</code></pre>
<p>Clones the specified Git repository (<code>https://github.com/example/repo</code>) into the specified path (<code>C:\Projects</code>).</p>
<h2 id="11-delete-a-specific-tag">11. Delete a Specific Tag</h2>
<pre><code class="language-cmd">nb.exe git_deletetag -tag 1.0.0 -v true
</code></pre>
<h2 id="12-creating-a-release">12. Creating a Release</h2>
<p>To create a release for the repository <code>my-repo</code> with the tag <code>1.0.0</code>, branch <code>main</code>, and an asset located at <code>C:\Releases\1.0.0.zip</code>, you would use the following command:</p>
<pre><code class="language-batch">nb.exe release_create -repo userName/my-repo -tag 1.0.0 -branch main -file C:\Releases\1.1.0.zip
</code></pre>
<h2 id="13-creating-a-pre-release">13. Creating a Pre-Release</h2>
<p>To create a pre-release for the repository <code>my-repo</code> with the tag <code>1.0.0</code>, branch <code>main</code>, and an asset located at <code>C:\Releases\1.0.0.zip</code>, you would use the following command:</p>
<pre><code class="language-batch">nb.exe pre_release_create -repo userName/my-repo -tag 1.0.0 -branch main -file C:\Releases\1.1.0.zip
</code></pre>
<h2 id="14-downloading-an-asset">14. Downloading an Asset</h2>
<p>To download an asset from the release with the tag <code>1.0.0</code> in the repository <code>my-repo</code> to the path <code>C:\Downloads</code>:</p>
<pre><code class="language-batch">nb.exe release_download -repo userName/my-repo -tag 1.0.0 -path C:\Downloads
</code></pre>
<p>An asset named 1.0.0.zip will be downloaded to the specified path if it exists in the release.</p>
<h2 id="15-creating-a-release-with-full-github-url">15. Creating a Release with Full GitHub URL</h2>
<p>To create a release for the repository <code>my-repo</code> with the tag <code>1.0.0</code>, branch <code>main</code>, and an asset located at <code>C:\Releases\1.0.0.zip</code>, using the full GitHub URL:</p>
<pre><code class="language-batch">nb.exe release_create -repo https://github.com/userName/my-repo -tag 1.0.0 -branch main -file C:\Releases\1.0.0.zip
</code></pre>
<h2 id="16-downloading-an-asset-with-full-github-url">16. Downloading an Asset with Full GitHub URL</h2>
<p>To download an asset from the release with the tag <code>1.0.0</code> in the repository <code>my-repo</code> to the path <code>C:\Downloads</code>, using the full GitHub URL:</p>
<pre><code class="language-batch">nb.exe release_download -repo https://github.com/userName/my-repo -tag 1.0.0 -path C:\Downloads
</code></pre>
<p>An asset named <code>1.0.0.zip</code> will be downloaded to the specified path if it exists in the release.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../versioning/" class="btn btn-neutral float-left" title="Versioning"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../nbackup/" class="btn btn-neutral float-right" title="Nbackup (nbackup.exe)">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/naz-hage/ntools" class="fa fa-code-fork" style="color: #fcfcfc"> ntools</a>
        </span>
    
    
      <span><a href="../../versioning/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../nbackup/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
